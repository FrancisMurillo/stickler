<!DOCTYPE html>
<html>
<head>
<title>Stickler</title>
<link href='css/jquery-ui-1.10.4.custom.min.css' rel='stylesheet'/>
<link href='css/stickler.css' rel='stylesheet' />

<script src='js/jquery-2.1.1.min.js'></script>
<script src='js/jquery-ui-1.10.4.custom.min.js'></script>
<script src='js/jquery.topzindex.min.js'></script>


<!--  Custom Functions -->
<script>
	function uniqId() {
	  	return Math.round(new Date().getTime() + (Math.random() * 100));
	}
	/* Returns a number to a string with px on it. Eg toPx(300) = 300px */
	function toPx(unit) {
		return unit + 'px';
	}


	_noteWidth = 150;
	_noteHeight = 150; 
	/* Generates a random X coordinate for a note */
	function randomNoteX() {
		return	( Math.random() * ($('body').width() - 2 *  _noteWidth)).toFixed();
	}
	
	/* Generates a random Y coordinate for a note, see randomNoteX() */ 	
	function randomNoteY() {
		return ( Math.random() * ($('body').height() - 2 * _noteHeight)).toFixed();
	}
	
</script>

<!-- Main Logic -->
<script type='text/javascript'>
		$(document).ready(function() {
			$('#add_note').on('click.add' , function() {
				var noteHTML = "<div></div>";
				var $newNote = $(noteHTML, {
									'class'	:	'task_note'	,
									'text'	:	'Hello'			
								});

				$newNote.appendTo($('#note_area'));	
				$newNote.draggable({
					containment:'parent' , 
					zIndex : 9007199254740992,	
					stop: function() {
						$(this).css('z-index' , $.topZIndex('.task_note')+ 1);
					}
				})
				$newNote.resizable();
								
				$newNote.css({			
					'width' 	: 	toPx(_noteWidth) 	, 
					'height'	: 	toPx(_noteHeight)	,
					
					'left'		:	toPx(randomNoteX())	,
					'top'		:	toPx(randomNoteY())	,
					
					'zIndex'	:	$.topZIndex('.task_note') + 1	
				});
				
			});
			
			$('#sticky').draggable();
			$('#sticky').resizable({
				handle : 'n,s,e,w,ne,se,sw,nw'
			});
			$('#sticky').css({
					'width' 	: 	toPx(_noteWidth) 	, 
					'height'	: 	toPx(_noteHeight)	,
					
					'zIndex'	:	$.topZIndex('.task_note') + 1	
				});
		});
	</script>
</head>
<body>
	<div id='wrapper'>
		<div id='action_area'>
			<a id='add_note' href='#'>Roar</a>
		</div>
		<div id='note_area'>
			<div id='sticky' class='task_note'>
				<header>
					<span>Task Action</span>
				</header>
				<section>
					<span>Title</span>
					<span>Goal</span>
				</section>
				<footer>
					<header>SubTask Action</header>
					<section>
						<span>My Tasks</span>
					</section>
				</footer>
			</div>
		</div>
	</div>
</body>
</html>